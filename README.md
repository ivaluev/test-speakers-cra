# Decomposition

* [ ] build fixed layout (header aside main)
* [ ] add headers with status (number of selected speakers + clear selection)
* [ ] implement click selection
* [ ] implement range selection
* [ ] implement area selection
* [ ] implement moving of speakers
* [ ] implement constained moving of speakers
* [ ] implement svg sprite 
* [ ] implement styling of speakers (selection css outline + animation)

---
# Task Description

SPA. React.

По городу развешены громкоговорители. Каждый из них может проигрывать одновременно несколько аудиодорожек с разной громкостью. Например, из всех динамиков района играет фоном одна и та же музыка, а если рядом с громкоговорителем есть достопримечательность, то там ещё диктор читает текст про неё. Для каждого динамика можно задать индивидуальную громкость каждого трека. 

Нужно сделать интерфейс управления этим делом.

Есть фонотека: список треков. Каждый трек можно проиграть. У каждого трека одна настройка: дефолтная громкость. Нужно показывать количество динамиков, на которые трек назначен.

Есть карта, где точками обозначены динамики. Около каждого динамика — количество треков, которые он проигрывает. Динамики можно выделять — простым кликом (выделяется один), с шифтом (выделяется несколько), рисованием прямоугольной области. По правому клику на динамик открыватся попап со списком треков динамика. В попапе можно:
●	удалить трек
●	изменить громкость для этого динамика
●	прослушать трек
●	прослушать то, как будет звучать динамик (проиграть все назначенные треки с заданной громкостью).

Треки назначаются на динамики:
●	перетаскиванием на карту
●	выделением динамика или нескольких динамиков с шифтом и кнопкой рядом с треком в фонотеке "Назначить на выбранные динамики".

API
Типы данных:
Track: Аудиоклип
	{
id: int,
url: string,
vol: float  // Дефолтная громкость
}

Speaker: Колонка
	{
id: int
	coord: [float, float],
	tracks: [
		{id: int, vol: float | undefined }, // Громкость для колонки
		...
	}
}

Методы:
GET /api/library
Получить фонотеку.
Ответ: [Track, ...]
Пример ответа: 
[
{id: 1, url: 'rammstein.mp3', vol:0.7},
{id: 2, url: 'kremlin.mp3', vol:1}
]


POST /api/library/upload
Добавить трек в фонотеку.
POST payload: file
Ответ: Track

POST /api/library/<id>
Изменить свойства трека в фонотеке
POST payload: {vol: 0.9}
Ответ: Track

DELETE /api/library/<id>
Удалить трек из фонотеки

GET /api/speakers
Получить список динамиков
Ответ: [Speaker, …]
Пример:
[{
id: 1,
coord': [38.1, 45.2],
tracks: [
{id: 1, vol: 0.4},
{id: 2}
]
}, …]

POST /api/speakers/<id> 
Сохранить один динамик 
POST payload: Speaker
Ответ: Speaker


POST /api/speakers
Сохранить список динамиков
POST payload: [Speaker, …]
Ответ: [Speaker, …]

Классы, свойства, методы. Внутренняя организация приложения: модули, компоненты, состояния, обработчики событий.
